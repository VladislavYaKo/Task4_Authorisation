@model IEnumerable<User>
@{ 
    Layout = "_Layout";
}
<h2>Список пользователей</h2>

<form asp-controller="Users" asp-action="ProcessList">
    <input type="submit" value="Delete" name="actionBtn" />
    <input type="submit" value="Block" name="actionBtn" />
    <input type="submit" value="Unblock" name="actionBtn" />
    <table class="table">
        <tr>
            <td><input type="checkbox" id="changeAll" onclick="changeAllClick()" name="changeAll" /></td>
            <td>Имя</td>
            <td>E-mail</td>
            <td>Дата регистрации</td>
            <td>Дата последнего входа</td>
            <td>Статус</td>
        </tr>
        @{
            foreach (User u in @Model)
            {
                <tr>
                    <td><input type="checkbox" name="choosenUser" value="@u.id" class="userCheckBox" /></td>
                    <td>@u.name</td>
                    <td>@u.email</td>
                    <td>@u.registrationDate</td>
                    <td>@u.lastLogin</td>
                    @{string status;
                        if (u.isBlocked)
                            status = "Заблокирован";
                        else
                            status = "Не заблокирован";
                    }
                    <td>@status</td>

                </tr>
            }
        }
    </table>
</form>
<a asp-controller="Account" asp-action="Logout">Выход</a>

<script>
    
    function changeAllClick(e) {
        var checkboxes = document.getElementsByClassName('userCheckBox');
        var changeAllBox = document.getElementById('changeAll');
        for (var i = 0; i < checkboxes.length; i++) {
            checkboxes[i].checked = changeAllBox.checked;
        };
    }
</script>

